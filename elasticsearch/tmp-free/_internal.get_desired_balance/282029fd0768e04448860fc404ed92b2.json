{
  "api": "_internal.get_desired_balance",
  "file": "/test/free/cluster.desired_balance/10_basic.yml",
  "name": "Test get desired balance for a single shard",
  "origin": "yaml",
  "request": {
    "args": {
    }
  },
  "response": {
    "headers": {
      "content-encoding": "gzip",
      "content-type": "application/json",
      "transfer-encoding": "chunked",
      "x-elastic-product": "Elasticsearch"
    },
    "payload": {
      "cluster_balance_stats": {
        "nodes": {
          "instance": {
            "actual_disk_usage_bytes": 0,
            "forecast_disk_usage_bytes": 0,
            "forecast_write_load": 0,
            "node_id": "0C8bL6OFSRa5YTn7w90xQA",
            "roles": [
              "data",
              "data_cold",
              "data_content",
              "data_frozen",
              "data_hot",
              "data_warm",
              "ingest",
              "master",
              "ml",
              "remote_cluster_client",
              "transform"
            ],
            "shard_count": 1,
            "undesired_shard_allocation_count": 0
          }
        },
        "shard_count": 1,
        "tiers": {
          "data": {
            "actual_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_write_load": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "shard_count": {
              "average": 1,
              "max": 1,
              "min": 1,
              "std_dev": 0,
              "total": 1
            },
            "undesired_shard_allocation_count": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            }
          },
          "data_cold": {
            "actual_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_write_load": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "shard_count": {
              "average": 1,
              "max": 1,
              "min": 1,
              "std_dev": 0,
              "total": 1
            },
            "undesired_shard_allocation_count": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            }
          },
          "data_content": {
            "actual_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_write_load": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "shard_count": {
              "average": 1,
              "max": 1,
              "min": 1,
              "std_dev": 0,
              "total": 1
            },
            "undesired_shard_allocation_count": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            }
          },
          "data_frozen": {
            "actual_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_write_load": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "shard_count": {
              "average": 1,
              "max": 1,
              "min": 1,
              "std_dev": 0,
              "total": 1
            },
            "undesired_shard_allocation_count": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            }
          },
          "data_hot": {
            "actual_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_write_load": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "shard_count": {
              "average": 1,
              "max": 1,
              "min": 1,
              "std_dev": 0,
              "total": 1
            },
            "undesired_shard_allocation_count": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            }
          },
          "data_warm": {
            "actual_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_disk_usage": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "forecast_write_load": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            },
            "shard_count": {
              "average": 1,
              "max": 1,
              "min": 1,
              "std_dev": 0,
              "total": 1
            },
            "undesired_shard_allocation_count": {
              "average": 0,
              "max": 0,
              "min": 0,
              "std_dev": 0,
              "total": 0
            }
          }
        },
        "undesired_shard_allocation_count": 0
      },
      "cluster_info": {
        "nodes": {
        },
        "reserved_sizes": [
        ],
        "shard_data_set_sizes": {
        },
        "shard_paths": {
        },
        "shard_sizes": {
        }
      },
      "routing_table": {
        "test": {
          "0": {
            "current": [
              {
                "forecast_shard_size_in_bytes": null,
                "forecast_write_load": null,
                "index": "test",
                "node": "0C8bL6OFSRa5YTn7w90xQA",
                "node_is_desired": true,
                "primary": true,
                "relocating_node": null,
                "relocating_node_is_desired": null,
                "shard_id": 0,
                "state": "STARTED",
                "tier_preference": [
                  "data_content"
                ]
              }
            ],
            "desired": {
              "ignored": 0,
              "node_ids": [
                "0C8bL6OFSRa5YTn7w90xQA"
              ],
              "total": 1,
              "unassigned": 0
            }
          }
        }
      },
      "stats": {
        "computation_active": false,
        "computation_converged": 3313,
        "computation_converged_index": 3312,
        "computation_executed": 3313,
        "computation_iterations": 4548,
        "computation_submitted": 3313,
        "computation_time_in_millis": 1200,
        "computed_shard_movements": 0,
        "reconciliation_time_in_millis": 600,
        "total_allocations": 1,
        "unassigned_shards": 0,
        "undesired_allocations": 0,
        "undesired_allocations_ratio": 0
      }
    },
    "statusCode": 200
  }
}