{
  "api": "esql.query",
  "file": "/test/platinum/esql/40_tsdb.yml",
  "name": "stats on aggregate_metric_double with partial submetrics",
  "origin": "yaml",
  "request": {
    "args": {
      "body": {
        "query": "FROM test3 | STATS max(agg_metric), min(agg_metric), sum(agg_metric), count(agg_metric) BY k8s.pod.uid | SORT k8s.pod.uid"
      }
    }
  },
  "response": {
    "headers": {
      "content-length": "447",
      "content-type": "application/json",
      "warning": "299 Elasticsearch-9.3.0-ca09313f181a305fac891905c6416d46977d312c \"No limit defined, adding default limit of [1000]\"",
      "x-elastic-product": "Elasticsearch"
    },
    "payload": {
      "error": {
        "reason": "Cannot invoke \"org.elasticsearch.index.mapper.NumberFieldMapper$NumberFieldType.name()\" because the return value of \"java.util.EnumMap.get(Object)\" is null",
        "root_cause": [
          {
            "reason": "Cannot invoke \"org.elasticsearch.index.mapper.NumberFieldMapper$NumberFieldType.name()\" because the return value of \"java.util.EnumMap.get(Object)\" is null",
            "type": "null_pointer_exception"
          }
        ],
        "type": "null_pointer_exception"
      },
      "status": 500
    },
    "statusCode": 500
  }
}