{
  "api": "indices.get_sample_stats",
  "file": "/test/free/indices.get_sample_stats/20_with_sampling_config.yml",
  "name": "Test get sample stats for conditional with exception",
  "origin": "yaml",
  "request": {
    "args": {
      "human": true,
      "index": "sample_test"
    }
  },
  "response": {
    "headers": {
      "content-type": "application/json",
      "transfer-encoding": "chunked",
      "x-elastic-product": "Elasticsearch"
    },
    "payload": {
      "last_exception": {
        "message": "runtime error",
        "stack_trace": "o.e.s.ScriptException: runtime error\n\tat o.e.p.PainlessScript.convertToScriptException(PainlessScript.java:94)\n\tat o.e.p.PainlessScript$Script.execute(ctx?.animal > 0:1)\n\tat o.e.i.SamplingService.evaluateCondition(SamplingService.java:601)\n\tat o.e.i.SamplingService.maybeSample(SamplingService.java:283)\n\tat o.e.i.SamplingService.maybeSample(SamplingService.java:172)\n\t... 10 more\nCaused by: j.l.ClassCastException: Cannot apply [>] operation to types [java.lang.String] and [java.lang.Integer].\n\tat o.e.p.DefMath.gt(DefMath.java:793)\n\tat o.e.p.PainlessScript$Script.execute(ctx?.animal > 0:4)\n\t... 13 more\n",
        "type": "script_exception"
      },
      "potential_samples": 2,
      "samples_accepted": 0,
      "samples_rejected_for_condition": 0,
      "samples_rejected_for_exception": 2,
      "samples_rejected_for_max_samples_exceeded": 0,
      "samples_rejected_for_rate": 0,
      "samples_rejected_for_size": 0,
      "time_compiling_condition": "2.3ms",
      "time_compiling_condition_millis": 2,
      "time_evaluating_condition": "0s",
      "time_evaluating_condition_millis": 0,
      "time_sampling": "4.2ms",
      "time_sampling_millis": 4
    },
    "statusCode": 200
  }
}