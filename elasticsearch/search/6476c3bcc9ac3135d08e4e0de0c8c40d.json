{
  "api": "search",
  "file": "/test/platinum/spatial/120_position_geo_line.yml",
  "name": "geo_line on position field DESC",
  "origin": "yaml",
  "request": {
    "args": {
      "body": {
        "aggregations": {
          "by_time_series": {
            "aggregations": {
              "museum_tour": {
                "geo_line": {
                  "point": {
                    "field": "location"
                  },
                  "sort": {
                    "field": "@timestamp"
                  },
                  "sort_order": "desc"
                }
              }
            },
            "time_series": {
            }
          }
        }
      },
      "index": "locations",
      "rest_total_hits_as_int": true,
      "typed_keys": true
    }
  },
  "response": {
    "headers": {
      "content-type": "application/json",
      "transfer-encoding": "chunked",
      "x-elastic-product": "Elasticsearch"
    },
    "payload": {
      "_shards": {
        "failed": 0,
        "skipped": 0,
        "successful": 1,
        "total": 1
      },
      "aggregations": {
        "time_series#by_time_series": {
          "buckets": {
            "{city=Amsterdam}": {
              "doc_count": 5,
              "geo_line#museum_tour": {
                "geometry": {
                  "coordinates": [
                    [
                      4.914722,
                      52.371667
                    ],
                    [
                      4.91235,
                      52.374081
                    ],
                    [
                      4.901618,
                      52.369219
                    ],
                    [
                      4.885057,
                      52.370159
                    ],
                    [
                      4.889187,
                      52.373184
                    ]
                  ],
                  "type": "LineString"
                },
                "properties": {
                  "complete": true
                },
                "type": "Feature"
              },
              "key": {
                "city": "Amsterdam"
              }
            },
            "{city=Antwerp}": {
              "doc_count": 3,
              "geo_line#museum_tour": {
                "geometry": {
                  "coordinates": [
                    [
                      4.4052,
                      51.2229
                    ],
                    [
                      4.405819,
                      51.221758
                    ],
                    [
                      4.401384,
                      51.220292
                    ]
                  ],
                  "type": "LineString"
                },
                "properties": {
                  "complete": true
                },
                "type": "Feature"
              },
              "key": {
                "city": "Antwerp"
              }
            },
            "{city=Paris}": {
              "doc_count": 2,
              "geo_line#museum_tour": {
                "geometry": {
                  "coordinates": [
                    [
                      2.327,
                      48.86
                    ],
                    [
                      2.336389,
                      48.861111
                    ]
                  ],
                  "type": "LineString"
                },
                "properties": {
                  "complete": true
                },
                "type": "Feature"
              },
              "key": {
                "city": "Paris"
              }
            }
          }
        }
      },
      "hits": {
        "hits": [
          {
            "_id": "UrC00u5b4t59MYXWAAABhYI7QwA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-05T14:00:00.000Z",
              "category": "Museum",
              "city": "Paris",
              "location": {
                "lat": 48.85999997612089,
                "lon": 2.3269999679178
              },
              "name": "Musée dOrsay",
              "route": 9
            }
          },
          {
            "_id": "UrC00u5b4t59MYXWAAABhYFfiQA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-05T10:00:00.000Z",
              "category": "Museum",
              "city": "Paris",
              "location": {
                "lat": 48.86111099738628,
                "lon": 2.3363889567553997
              },
              "name": "Musée du Louvre",
              "route": 8
            }
          },
          {
            "_id": "kld4ViQacojggF78AAABhXeArgA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-03T12:00:00.000Z",
              "category": "Museum",
              "city": "Amsterdam",
              "location": {
                "lat": 52.37166699953377,
                "lon": 4.91472196765244
              },
              "name": "Nederlands Scheepvaartmuseum",
              "route": 4
            }
          },
          {
            "_id": "kld4ViQacojggF78AAABhXM2DAA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-02T16:00:00.000Z",
              "category": "Museum",
              "city": "Amsterdam",
              "location": {
                "lat": 52.374080987647176,
                "lon": 4.912349972873926
              },
              "name": "NEMO Science Museum",
              "route": 3
            }
          },
          {
            "_id": "kld4ViQacojggF78AAABhXKRQIA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-02T13:00:00.000Z",
              "category": "Museum",
              "city": "Amsterdam",
              "location": {
                "lat": 52.36921898089349,
                "lon": 4.901617951691151
              },
              "name": "Museum Het Rembrandthuis",
              "route": 2
            }
          },
          {
            "_id": "kld4ViQacojggF78AAABhXHsdQA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-02T10:00:00.000Z",
              "category": "Attraction",
              "city": "Amsterdam",
              "location": {
                "lat": 52.370158969424665,
                "lon": 4.885056987404823
              },
              "name": "The Amsterdam Dungeon",
              "route": 1
            }
          },
          {
            "_id": "kld4ViQacojggF78AAABhXG1hoA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-02T09:00:00.000Z",
              "category": "Attraction",
              "city": "Amsterdam",
              "location": {
                "lat": 52.37318399827927,
                "lon": 4.889186918735504
              },
              "name": "Royal Palace Amsterdam",
              "route": 0
            }
          },
          {
            "_id": "T2KYIxP9VvMyw4UyAAABhX1L1YA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-04T15:00:00.000Z",
              "category": "Museum",
              "city": "Antwerp",
              "location": {
                "lat": 51.22289997059852,
                "lon": 4.40519998781383
              },
              "name": "Letterenhuis",
              "route": 7
            }
          },
          {
            "_id": "T2KYIxP9VvMyw4UyAAABhXynCgA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-04T12:00:00.000Z",
              "category": "Museum",
              "city": "Antwerp",
              "location": {
                "lat": 51.22175797820091,
                "lon": 4.4058189913630486
              },
              "name": "Snijders&Rockoxhuis",
              "route": 6
            }
          },
          {
            "_id": "T2KYIxP9VvMyw4UyAAABhXwCPoA",
            "_index": "locations",
            "_score": 1,
            "_source": {
              "@timestamp": "2023-01-04T09:00:00.000Z",
              "category": "Attraction",
              "city": "Antwerp",
              "location": {
                "lat": 51.22029198333621,
                "lon": 4.401383958756924
              },
              "name": "Cathedral of Our Lady",
              "route": 5
            }
          }
        ],
        "max_score": 1,
        "total": 10
      },
      "timed_out": false,
      "took": 2
    },
    "statusCode": 200
  }
}